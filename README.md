简体中文 | [English](README_EN.md)

### NotebookQwen

#### 项目概述
本项目参考NotebookLlama，旨在从输入的网址中提取文本，生成播客文本，并将其转换为视频文件。

项目主要分为以下几个步骤：
1. 获取网页内容并保存为文本文件。
2. 使用LLM（大型语言模型）生成播客文本。
3. 将生成的播客文本转换为语音文件。
4. 将生成的播客文本转换为图片文件。
5. 将生成的语音和图片文件转换为视频文件。

#### Demo

[9.1分！中国电影终于有了《好东西》](https://mp.weixin.qq.com/s/sGEcVIxH6TkIjeWew-LSJg)

[![9.1分！中国电影终于有了《好东西》](https://img.youtube.com/vi/Hg27tPm9xfY/0.jpg)](https://www.youtube.com/watch?v=Hg27tPm9xfY)

```json
[
    {
        "speaker": "发言者1",
        "content": "大家好，欢迎来到今天的节目！我是你们的老朋友，今天我们要聊一部非常特别的电影——《好东西》。这部电影不仅收获了大量好评，还引发了广泛的讨论，特别是对于那些关心女性主义话题的朋友来说，绝对是一次不容错过的精神盛宴。今天，我们请来了我的好朋友，也是对电影有着独到见解的嘉宾，来和我们一起聊聊这部影片。你好，欢迎来到节目！"
    },
    {
        "speaker": "发言者2",
        "content": "嗯，谢谢邀请！我看了《好东西》，感觉真的很不一样，有一种久违的轻松和温暖。这部电影到底有什么特别之处呢？"
    },
    {
        "speaker": "发言者1",
        "content": "对，这部电影的特别之处在于它用一种非常细腻、幽默的方式探讨了女性主义和现代都市生活。你知道，现在很多电影都在讲女性如何坚强、独立，但往往给人一种苦大仇深的感觉。而《好东西》却用一种非常轻松、愉快的方式来讲述这些故事，让人看完之后心情特别好。就像是一杯温暖的热茶，让你在寒冷的冬日里感到一丝暖意。"
    },
    {
        "speaker": "发言者2",
        "content": "嗯，我也觉得这部电影特别治愈。特别是那几个女性角色，每个人都那么鲜活，有自己的特点和故事。你能具体说说这几个角色吗？"
    },
    {
        "speaker": "发言者1",
        "content": "当然可以。这部电影的主角是单亲妈妈王铁梅，由宋佳饰演。她是一个非常独立、能干的女性，不仅要照顾女儿，还要应对工作上的各种挑战。她的女儿王茉莉，也就是大家亲切称呼的‘小孩’，是一个非常早熟、聪明的小女孩，经常会说出一些让人眼前一亮的话。还有一个重要角色是小叶，由钟楚曦饰演，她是一个乐队主唱，性格开朗，但内心其实有很多伤痕。这三个女性之间的互动非常有趣，她们互相支持、互相帮助，形成了一种非常温馨的氛围。"
    },
    {
        "speaker": "发言者2",
        "content": "对，这种女性之间的友情真的很有力量。特别是那场小叶被尾随的戏，铁梅骑着平衡车去保护她，那一幕特别打动我。这种姐妹情谊在电影中表现得淋漓尽致。嗯，我觉得这种情节在生活中也经常能看到，比如在公交车上，如果有人欺负你，旁边的人会主动站出来帮忙。这种互助精神真的很重要。"
    },
    {
        "speaker": "发言者1",
        "content": "没错，那一幕确实非常有力量。它不仅展示了女性之间的互助和支持，还传递了一种非常积极的信息：女性完全可以依靠彼此，共同面对生活中的困难。另外，电影中的男性角色也非常有趣，他们更像是配角，为女性的成长和故事发展提供了背景和衬托。比如，那个‘渣男’胡医生，虽然让人有些心烦，但也让小叶逐渐意识到自己真正想要的是什么。这些男性角色的存在，反而突显了女性的独立和自主。"
    },
    {
        "speaker": "发言者2",
        "content": "嗯，我也有同感。特别是那个胡医生，他的一些行为真的让人气愤，但小叶最后的成长和变化，也让人感到欣慰。电影中还有很多细节值得品味，比如那些关于女性主义的‘彩蛋’，上野千鹤子的书、金斯伯格的T恤等等，这些细节不仅增加了电影的深度，也让观众感到非常亲切。嗯，这些细节就像是一颗颗珍珠，串起了整个故事。"
    },
    {
        "speaker": "发言者1",
        "content": "是的，这些小细节正是电影的魅力所在。它们不仅丰富了故事，还让观众在笑声中感受到生活的美好。比如，铁梅在地铁上靠在陌生人的肩膀上，结果另一个女生主动揽住她的那一幕，让人觉得特别温暖。这种小细节让人感受到生活中处处有美好。最后，我想说的是，《好东西》不仅仅是一部女性主义电影，更是一部关于成长、关于爱、关于生活的电影。无论你是男性还是女性，都能从中找到共鸣，感受到生活的美好。"
    },
    {
        "speaker": "发言者2",
        "content": "嗯，完全同意。这部电影真的值得一看。谢谢今天的分享，让我们对《好东西》有了更深的了解。希望大家也能去电影院支持这部好电影！"
    },
    {
        "speaker": "发言者1",
        "content": "对，再次感谢大家收听今天的节目。如果你喜欢我们的内容，别忘了给我们点个赞，分享给更多的朋友。我们下次节目再见！"
    },
    {
        "speaker": "发言者2",
        "content": "再见！"
    }
]
```

#### 目录结构
```
project/
├── main.py
├── utils/
│   ├── config.py
│   ├── image.py
│   ├── llm.py
│   ├── log.py
│   ├── processing.py
│   ├── tts.py
│   └── video.py
├── config-template.toml
└── config.toml
```

#### 安装依赖
确保安装了以下依赖库：
```sh
pip install -r requirements.txt
```

#### 配置文件
项目需要一个配置文件 `config.toml`，示例如下：

1. 复制模板文件：
   ```sh
   cp config-template.toml config.toml
   ```

2. 修改 `config.toml` 文件内容：
   ```toml
   [llm]
   api_key = "YOUR_LLM_API_KEY"
   base_url = "https://api.example.com"
   model = "your_model_name"
   prompt_writer = "Your initial prompt for generating the podcast"
   prompt_rewriter = "Your rewriter prompt for refining the podcast"

   [tts]
   api_key = "YOUR_TTS_API_KEY"
   model = "your_tts_model_name"
   voices = ["voice1", "voice2"]
   ```

#### 运行项目
1. 确保配置文件 `config.toml` 已正确配置。
2. 运行主脚本 `main.py` 并传入URL作为参数。

```sh
python main.py https://mp.weixin.qq.com/s/sGEcVIxH6TkIjeWew-LSJg
```

#### 致谢
- [NotebookLlama](https://github.com/meta-llama/llama-recipes/tree/main/recipes/quickstart/NotebookLlama)

希望这个README对你有帮助！如果有任何问题或建议，请随时联系。
