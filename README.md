### Novels-Podcast-Generator

#### 项目概述
本项目参考NotebookLlama，旨在从[金庸网](https://www.jinyongwang.net/)的小说内容中提取文本，生成播客文本，并将其转换为语音文件。项目主要分为以下几个步骤：
1. 提取章节编号并创建相应的文件夹。
2. 获取小说内容并保存为文本文件。（其他网站，按需更改processing.py文件即可）
3. 使用LLM（大型语言模型）生成播客文本。（采用的是QWEN的模型，可自行更换）
4. 将生成的播客文本转换为语音文件。

#### Demo

天龙八部 第01章 青衫磊落险峰行

[试听](644.mp3)

<audio controls>
  <source src="644.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

```json
[
    {
        "speaker": "发言者1",
        "content": "大家好，欢迎来到今天的播客节目！我是你们的老朋友，今天我们要一起探讨一部经典中的经典——金庸先生的《天龙八部》。这部小说不仅在中国，在全世界都有着无数的粉丝。今天我们要聊的是《天龙八部》修订版的第一章，这一章的标题叫做《青衫磊落险峰行》。这个标题本身就充满了诗意和武侠的气息，仿佛将我们带到了险峻的山峰之上，感受到了一种磊落的侠客风范。让我们一起走进这个精彩的世界吧！"
    },
    {
        "speaker": "发言者2",
        "content": "哇，这个标题真的很吸引人！‘青衫磊落’这几个字让我立刻联想到了那些行侠仗义的江湖侠士。这一章主要讲了些什么内容呢？"
    },
    {
        "speaker": "发言者1",
        "content": "这一章主要描述了一场剑术比武的场景，地点是在无量山的剑湖宫。无量剑是小说中的一个重要门派，分为东宗和西宗。东宗和西宗每五年会在剑湖宫举行一次比武，获胜的一方可以在剑湖宫居住五年。这次比武中，东宗的弟子龚光杰战胜了西宗的弟子褚万里，眼看东宗就要赢得胜利，但就在这时，一个意想不到的人物出现了。你能猜到是谁吗？"
    },
    {
        "speaker": "发言者2",
        "content": "哦，这听起来真的很有趣。会不会是一个神秘的高手突然出现，打破了比赛的局面？"
    },
    {
        "speaker": "发言者1",
        "content": "你猜得没错，确实有一个神秘人物出现了，但这个人并不是什么武功高强的高手，而是一个看起来非常普通的青衣少年。这个少年名叫段誉，他是随着滇南的武师马五德一起来到无量山的。段誉在观看比赛时，因为龚光杰的一个虚招而忍不住笑出了声，结果被东宗的掌门左子穆注意到了。左子穆觉得这个少年出言不逊，便让他下场和自己的弟子比试。你觉得段誉会怎么办呢？"
    },
    {
        "speaker": "发言者2",
        "content": "哦，这下段誉可麻烦了。他会不会有什么绝招呢？还是说他真的不会武功？"
    },
    {
        "speaker": "发言者1",
        "content": "段誉确实不会武功，他只是一个普通书生，从来没有学过武艺。但他有一种特殊的气质，让人感到亲切和信任。在比试的过程中，段誉的表现非常有趣，他不仅拒绝了左子穆的挑战，还和一个名叫钟灵的少女发生了互动。钟灵是一个非常机灵的女孩，她有一只叫闪电貂的小动物，能够在关键时刻帮助段誉。你对这个闪电貂感兴趣吗？"
    },
    {
        "speaker": "发言者2",
        "content": "嗯，闪电貂听起来很神奇。它能在关键时刻帮助段誉，是不是有什么特别的本领？"
    },
    {
        "speaker": "发言者1",
        "content": "没错，闪电貂是一种非常罕见的动物，它不仅速度快如闪电，而且还带有剧毒。在段誉和钟灵被神农帮围困的时候，闪电貂发挥了巨大的作用，帮助他们逃脱了危机。但即便如此，段誉和钟灵还是被神农帮的帮主司空玄抓住了。司空玄为了逼迫钟灵拿出解毒的药物，给段誉服下了断肠散，这是一种七天后毒发身亡的毒药。你觉得段誉和钟灵会有办法解决这个困境吗？"
    },
    {
        "speaker": "发言者2",
        "content": "这真是太紧张了！他们肯定要有办法才行，不然故事就没办法继续了。段誉会不会有什么奇遇，找到解毒的方法？"
    },
    {
        "speaker": "发言者1",
        "content": "你猜得没错，段誉确实会有一些奇遇。在接下来的情节中，段誉被派去钟灵的家中取解药。钟灵给了他一双鞋子作为信物，让他去找她的母亲。钟灵的母亲会想办法说服钟灵的父亲，从而帮助段誉和钟灵脱困。这一章的内容非常丰富，既有紧张的比武场面，又有温馨的互动，还有神秘的动物和复杂的剧情，真的是引人入胜。"
    },
    {
        "speaker": "发言者2",
        "content": "是啊，这一章真的很有意思。金庸先生的笔法真的很棒，能把这么多元素融合在一起，让人读起来既紧张又兴奋。对了，你最喜欢这一章的哪个部分？"
    },
    {
        "speaker": "发言者1",
        "content": "我最喜欢的部分是段誉和钟灵之间的互动。他们的对话非常有趣，充满了青春的活力和纯真。特别是钟灵的机智和勇敢，让人印象深刻。你觉得呢？"
    },
    {
        "speaker": "发言者2",
        "content": "我也特别喜欢钟灵这个角色。她不仅聪明伶俐，还非常勇敢，能够在关键时刻帮助段誉。这种角色真的很吸引人。对了，接下来的故事会怎样发展呢？"
    },
    {
        "speaker": "发言者1",
        "content": "接下来的故事会更加精彩。段誉在前往钟灵家的路上，会遇到更多的奇遇和挑战。他会逐渐揭开自己的身世之谜，也会遇到更多有趣的人物。我们下次节目中再继续聊这些精彩的内容吧。希望你们喜欢今天的节目，如果有什么想法或者问题，欢迎在评论区留言。谢谢大家，我们下次再见！"
    },
    {
        "speaker": "发言者2",
        "content": "对，谢谢大家收听，我们下次节目再见！"
    }
]
```

#### 目录结构
```
project/
├── main.py
├── utils/
│   ├── config.py
│   ├── llm.py
│   ├── processing.py
│   ├── tts.py
│   └── log.py
├── config-template.toml
└── config.toml
```

#### 安装依赖
确保安装了以下依赖库：
```sh
pip install -r requirements.txt
```

#### 配置文件
项目需要一个配置文件 `config.toml`，示例如下：

1. 复制模板文件：
   ```sh
   cp config-template.toml config.toml
   ```

2. 修改 `config.toml` 文件内容：
   ```toml
   [llm]
   api_key = "YOUR_LLM_API_KEY"
   base_url = "https://api.example.com"
   model = "your_model_name"
   prompt_writer = "Your initial prompt for generating the podcast"
   prompt_rewriter = "Your rewriter prompt for refining the podcast"

   [tts]
   api_key = "YOUR_TTS_API_KEY"
   model = "your_tts_model_name"
   voices = ["voice1", "voice2"]
   ```

#### 运行项目
1. 确保配置文件 `config.toml` 已正确配置。
2. 运行主脚本 `main.py` 并传入小说内容的URL作为参数。

```sh
python main.py https://www.jinyongwang.net/tian/644.html
```

#### 致谢
- [NotebookLlama](https://github.com/meta-llama/llama-recipes/tree/main/recipes/quickstart/NotebookLlama)

希望这个README对你有帮助！如果有任何问题或建议，请随时联系。